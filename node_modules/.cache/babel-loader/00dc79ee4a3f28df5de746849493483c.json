{"ast":null,"code":"var _jsxFileName = \"/Users/gomillion/sei-monstera/projects/MomMade/MomMade-frontend/src/pages/AdminPage.js\";\nimport { Component } from 'react';\nimport Products from '../components/adminProdTable';\nimport NewProductForm from '../components/newProductForm'; // Baseurl\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet baseUrl = '';\n\nif (process.env.NODE_ENV === 'development') {\n  baseUrl = 'http://localhost:3005';\n} else {\n  baseUrl = 'https://git.heroku.com/proj4-mommadecustoms-api.git';\n}\n\nexport default class AllProductsAdmin extends Component {\n  constructor(props) {\n    super(props);\n\n    this.addProduct = newProduct => {\n      const copyProducts = [...this.props.products];\n      copyProducts.push(newProduct);\n      this.setState({\n        products: copyProducts\n      });\n    };\n\n    this.deleteProduct = async id => {\n      const url = baseUrl + '/products/' + id;\n\n      try {\n        const response = await fetch(url, {\n          method: 'DELETE',\n          credentials: \"include\"\n        });\n\n        if (response.status === 200) {\n          const findIndex = this.props.products.findIndex(product => product._id === id);\n          const copyProducts = [...this.props.products];\n          copyProducts.splice(findIndex, 1);\n          console.log(`Deleted product: ${findIndex} `);\n          this.setState({\n            products: copyProducts\n          });\n        }\n      } catch (err) {\n        console.log('Error => ', err);\n      }\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const url = baseUrl + '/products/' + this.state.productToBeEdited._id;\n\n      try {\n        const response = await fetch(url, {\n          method: 'PUT',\n          body: JSON.stringify({\n            type: e.target.type.value,\n            product: {\n              name: e.target.name.value,\n              description: e.target.description.value,\n              brand: e.target.brand.value,\n              size: e.target.size.value,\n              color: e.target.color.value,\n              price: e.target.price.value,\n              img: e.target.img.value\n            }\n          }),\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          credentials: \"include\"\n        });\n\n        if (response.status === 200) {\n          const updatedProduct = await response.json();\n          const findIndex = this.props.products.findIndex(prod => prod._id === updatedProduct.data._id);\n          const copyProducts = [...this.props.products];\n          copyProducts[findIndex] = updatedProduct.data;\n          this.setState({\n            products: copyProducts,\n            modalOpen: false\n          });\n        }\n      } catch (err) {\n        console.log('Error => ', err);\n      }\n    };\n\n    this.handleChange = e => {\n      // console.log(e.target)\n      this.setState({\n        [e.target.type]: e.target.value,\n        product: {\n          [e.target.name]: e.target.value,\n          [e.target.description]: e.target.value,\n          [e.target.brand]: e.target.value,\n          [e.target.size]: e.target.value,\n          [e.target.color]: e.target.value,\n          [e.target.price]: e.target.value,\n          [e.target.img]: e.target.value\n        }\n      });\n    };\n\n    this.showEditForm = prod => {\n      console.log(prod);\n      this.setState({\n        modalOpen: true,\n        type: prod.type,\n        product: {\n          name: prod.product.name,\n          description: prod.product.description,\n          brand: prod.product.brand,\n          size: prod.product.size,\n          color: prod.product.color,\n          price: prod.product.price,\n          img: prod.product.img\n        },\n        productToBeEdited: prod\n      });\n    };\n\n    this.state = {\n      modalOpen: false,\n      productModalOpen: false,\n      productToBeShown: {},\n      productToBeEdited: {},\n      type: '',\n      product: {\n        name: '',\n        description: '',\n        brand: '',\n        color: '',\n        size: '',\n        price: '',\n        img: ''\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \" Edit / Delete / New Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(NewProductForm, {\n          baseUrl: baseUrl,\n          addProduct: this.addProduct\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Products, {\n          products: this.props.products,\n          deleteProduct: this.deleteProduct,\n          showEditForm: this.showEditForm\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }, this), this.state.modalOpen && /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: this.handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Edit Product : \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 48\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"type\",\n            value: this.state.type,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 91\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"name\",\n            value: this.state.product.name,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 99\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"description\",\n            value: this.state.product.description,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 113\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"brand\",\n            value: this.state.product.brand,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 101\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"color\",\n            value: this.state.product.color,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 101\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"size\",\n            value: this.state.product.size,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 99\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"price\",\n            value: this.state.product.price,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 101\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"img\",\n            value: this.state.product.img,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 17\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 97\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Submit Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/Users/gomillion/sei-monstera/projects/MomMade/MomMade-frontend/src/pages/AdminPage.js"],"names":["Component","Products","NewProductForm","baseUrl","process","env","NODE_ENV","AllProductsAdmin","constructor","props","addProduct","newProduct","copyProducts","products","push","setState","deleteProduct","id","url","response","fetch","method","credentials","status","findIndex","product","_id","splice","console","log","err","handleSubmit","e","preventDefault","state","productToBeEdited","body","JSON","stringify","type","target","value","name","description","brand","size","color","price","img","headers","updatedProduct","json","prod","data","modalOpen","handleChange","showEditForm","productModalOpen","productToBeShown","render"],"mappings":"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","sourcesContent":["import { Component } from 'react';\nimport Products from '../components/adminProdTable';\nimport NewProductForm from '../components/newProductForm';\n\n\n// Baseurl\nlet baseUrl = ''\n\nif (process.env.NODE_ENV === 'development') {\n  baseUrl = 'http://localhost:3005'\n} else {\n  baseUrl = 'https://git.heroku.com/proj4-mommadecustoms-api.git'\n\n}\n\nexport default class AllProductsAdmin extends Component {\n    constructor(props) {\n        super(props)\n\n        this.state ={ \n            modalOpen: false,\n            productModalOpen: false,\n            productToBeShown: {},\n            productToBeEdited: {},\n            type: '',\n            product: {\n            name: '',\n            description: '',\n            brand: '',\n            color: '',\n            size: '',\n            price: '',\n            img: '',\n        }\n    }  \n    }\n\n\n\n    addProduct = (newProduct) => {\n        const copyProducts = [...this.props.products]\n        copyProducts.push(newProduct)\n        this.setState({\n          products: copyProducts\n        })\n      }\n\n    deleteProduct = async (id) => {\n        const url = baseUrl + '/products/' + id\n        \n        try{\n          const response = await fetch( url, {\n            method: 'DELETE',\n            credentials: \"include\"\n          })\n    \n          if (response.status===200){\n    \n            const findIndex = this.props.products.findIndex(product => product._id === id)\n            const copyProducts = [...this.props.products]\n            copyProducts.splice(findIndex, 1)\n            console.log(`Deleted product: ${findIndex} `)\n                \n            this.setState({\n              products: copyProducts\n            })\n          }\n          \n        }\n        catch(err){\n          console.log('Error => ', err);\n        }\n      }\n    \n      handleSubmit = async (e) => {\n        e.preventDefault()\n          const url = baseUrl + '/products/' + this.state.productToBeEdited._id\n          try{\n            const response = await fetch( url , {\n              method: 'PUT',\n              body: JSON.stringify({\n                type: e.target.type.value,\n                product:{\n                  name: e.target.name.value,\n                  description: e.target.description.value,\n                  brand: e.target.brand.value,\n                  size: e.target.size.value,\n                  color: e.target.color.value,\n                  price: e.target.price.value,\n                  img: e.target.img.value,\n                }\n                 \n              }),\n              headers: {\n                'Content-Type' : 'application/json'\n              },\n              credentials: \"include\"\n            })\n      \n            if (response.status===200){\n              const updatedProduct = await response.json()\n              const findIndex = this.props.products.findIndex(prod => prod._id === updatedProduct.data._id)\n              const copyProducts = [...this.props.products]\n              copyProducts[findIndex] = updatedProduct.data\n              this.setState({\n                products: copyProducts,\n                modalOpen:false\n              })\n            }\n          }\n          catch(err){\n            console.log('Error => ', err);\n          }\n        }\n\n    handleChange = (e)=>{\n        // console.log(e.target)\n        this.setState({\n          [e.target.type]: e.target.value,\n          product: {\n            [e.target.name]: e.target.value,\n            [e.target.description]: e.target.value,\n            [e.target.brand]: e.target.value,\n            [e.target.size]: e.target.value,\n            [e.target.color]: e.target.value,\n            [e.target.price]: e.target.value,\n            [e.target.img]: e.target.value,\n          }\n        })\n      }\n  \n  \n  \n      showEditForm = (prod)=>{\n        console.log(prod)\n        this.setState({\n          modalOpen:true, \n          type: prod.type,\n          product: {\n            name: prod.product.name,\n            description: prod.product.description,\n            brand: prod.product.brand,\n            size: prod.product.size,\n            color: prod.product.color,\n            price: prod.product.price,\n            img: prod.product.img\n          },\n          productToBeEdited: prod\n        })\n      }\n\n      \n    \n\n   render() {\n       \n        return (\n            <div>\n                <>\n                <h1> Edit / Delete / New Page</h1>\n            <NewProductForm baseUrl={ baseUrl } addProduct={ this.addProduct } />\n            <Products \n                products = {this.props.products} \n                deleteProduct={this.deleteProduct} \n                showEditForm={this.showEditForm} \n             />\n            \n            {this.state.modalOpen &&\n\n                <form onSubmit={this.handleSubmit}>\n                <label>Edit Product : </label> <br/>\n                <input name=\"type\" value={this.state.type} onChange={this.handleChange}/> <br/>\n                <input name=\"name\" value={this.state.product.name} onChange={this.handleChange}/> <br/>\n                <input name=\"description\" value={this.state.product.description} onChange={this.handleChange}/> <br/>\n                <input name=\"brand\" value={this.state.product.brand} onChange={this.handleChange}/> <br/>\n                <input name=\"color\" value={this.state.product.color} onChange={this.handleChange}/> <br/>\n                <input name=\"size\" value={this.state.product.size} onChange={this.handleChange}/> <br/>\n                <input name=\"price\" value={this.state.product.price} onChange={this.handleChange}/> <br/>\n                <input name=\"img\" value={this.state.product.img} onChange={this.handleChange}/> <br/>\n                <button>Submit Changes</button>\n\n                </form>}\n                </>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}